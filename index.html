<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>試しページ</title>
    <!-- MapLibre GL JS のCSSとJSを読み込み -->
    <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet" />
    <script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
    <style>
        /* 地図のサイズを指定 */
        body, html { margin: 0; padding: 0; height: 100%; }
        #map { width: 100%; height: 100vh; }
    </style>
</head>
<body>
    <!-- 地図を表示するためのコンテナ -->
    <div id="map"></div>

    <script>
        // MapLibre GL JS 地図の初期化
        const map = new maplibregl.Map({
            container: 'map',  // 地図を表示する要素のID
            style: 'https://tile.openstreetmap.jp/styles/osm-bright-ja/style.json',  // OSMのスタイル
            center: [139.6917, 35.6895],  // 東京の中心座標
            zoom: 10  // 初期ズームレベル
        });

        // GeoJSONファイルのリスト (URL、色、タイプを指定)
        const geoJsonFiles = [
            { url: './東京都（本島のみ）_行政区域_4326v2.geojson',layerId: 'polygon-layer'},
            { url: './東京都_路線_R5_4326v4.geojson', layerId: 'line-layer'},
            { url: './東京駅_集客施設_4326.geojson', layerId: 'point-layer' }
                        
        ];

       
        // 地図の読み込みが完了したらGeoJSONデータを追加
  map.on('load', () => {
            geoJsonFiles.forEach((file, index) => {
                fetch(file.url)
                    .then(response => response.json())
                    .then(data => {
                        const sourceId = `geojson-source-${index}`;
                        map.addSource(sourceId, { type: 'geojson', data: data });

                        // それぞれのファイルに対応するレイヤーを追加
                        const layerOptions = {
                            "polygon-layer": {
                                "type": "fill",
                                "source": sourceId,
                                "paint": {
                                    "fill-color": "rgba(0, 0, 0, 0)",
                                    "fill-outline-color": "#000000"
                                }
                            },
                            "line-layer": {
                                "type": "line",
                                "source": sourceId,
                                "paint": {
                                    "line-color": ["get", "色"],
                                    "line-width": 3,
                                    "line-opacity": 0.8
                                },
                                "layout": {
                                    "line-cap": "round",
                                    "line-join": "round"
                                }
                            },
                            "point-layer": {
                                "type": "circle",
                                "source": sourceId,
                                "paint": {
                                    "circle-radius": 6,
                                    "circle-color": "#ff0000",
                                    "circle-stroke-width": 3,
                                    "circle-stroke-color": "#ffffff"
                                }
                            }
                        };

                        // 適切なレイヤーを追加
                        if (layerOptions[file.layerId]) {
                            map.addLayer(layerOptions[file.layerId]);
                        }
                    })
                    .catch(error => console.error(`GeoJSONファイルの読み込みに失敗しました: ${file.url}`, error));
            });
        });
    </script>
</body>
</html>

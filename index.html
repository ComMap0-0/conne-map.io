<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>試しページ</title>
    <!-- MapLibre GL JS のCSSとJSを読み込み -->
    <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet" />
    <script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
    <style>
        /* 地図のサイズを指定 */
        body, html { margin: 0; padding: 0; height: 100%; }
        #map { width: 100%; height: 100vh; }
    </style>
</head>
<body>
    <!-- 地図を表示するためのコンテナ -->
    <div id="map"></div>

    <script>
        // MapLibre GL JS 地図の初期化
        const map = new maplibregl.Map({
            container: 'map',  // 地図を表示する要素のID
            style: 'https://tile.openstreetmap.jp/styles/osm-bright-ja/style.json',  // OSMのスタイル
            center: [139.6917, 35.6895],  // 東京の中心座標
            zoom: 10  // 初期ズームレベル
        });

        // GeoJSONファイルのリスト (URL、色、タイプを指定)
        const geoJsonFiles = [
            { url: './東京都（本島のみ）_行政区域_4326v2.geojson',layerId: 'polygon-layer'},
            { url: './東京都_路線_R5_4326v4.geojson', layerId: 'line-layer'},
            { url: './東京駅_集客施設_4326.geojson', layerId: 'point-layer' }
                        
        ];

       
        // 地図の読み込みが完了したらGeoJSONデータを追加
       map.on('load', () => {
            // 1. Polygon GeoJSON Layer
                map.addSource('polygon-source', {
                    type: 'geojson',
                    data: './/東京都（本島のみ）_行政区域_4326v2.geojson' 
                        });
                   map.addLayer({
                        id: 'polygon-fill-layer',
                        type: 'fill',
                        source: 'polygon-source',
                        paint: {
                        'fill-color': '#f0a', // 完全に透明
                        'fill-outline-color': '0.5' // 透明にして線レイヤーに委ねる
                        }
                        });

        // 2. 境界線を表すラインレイヤー
                    map.addLayer({
                        id: 'polygon-outline-layer',
                        type: 'line',
                        source: 'polygon-source',
                        paint: {
                        'line-color': '#000000',      // 境界線の色を設定
                        'line-width': 5               // 境界線の太さを指定
                        },
                        layout: {
                        'line-cap': 'round',          // 線の端を丸める
                        'line-join': 'round'          // 線の角を丸める
                                }
                            });
                        });

            // 2. Line GeoJSON Layer
            fetch('./東京都_路線_R5_4326v4.geojson')
                .then(response => response.json())
                .then(data => {
                    map.addSource('line-source', { type: 'geojson', data: data });
                    map.addLayer({
                        id: 'line-layer',
                        type: 'line',
                        source: 'line-source',
                        paint: {
                            'line-color': ['get', '色' ],
                            'line-width': 3,
                            'line-opacity': 0.3
                        },
                        layout: {
                            'line-cap': 'round',
                            'line-join': 'round'
                        }
                    });
                });

            // 3. Point GeoJSON Layer
            fetch('./東京駅_集客施設_4326.geojson')
                .then(response => response.json())
                .then(data => {
                    map.addSource('point-source', { type: 'geojson', data: data });
                    map.addLayer({
                        id: 'point-layer',
                        type: 'circle',
                        source: 'point-source',
                        paint: {
                            'circle-radius': 6,
                            'circle-color': '#000000',
                            'circle-stroke-width': 3,
                            'circle-stroke-color': '#ffffff'
                        }
                    });
                });
        });

       
    </script>
</body>
</html>
